import{i as N,r as u,x as $,j,k as B,o as a,a as r,b as o,f as c,u as s,z as R,m as C,F as g,e as U,d as h,l as z,t as m}from"./index-SnOBJRe6.js";import{s as P,F as T}from"./pages.css_vue_type_style_index_0_src_true_lang-OrqQe0zQ.js";import"./useUsersStore-DeqpMyJa.js";import{u as A,a as G,f as S}from"./useSorting-Bi68fFlD.js";import{u as H,r as J}from"./requestModal-bdU8RDVP.js";import{e as D}from"./useKeyboardShortcuts-DkxLRe_B.js";import"./useFullScreen-BNunA2HP.js";import"./vuelidate-BXQAJ37Y.js";import"./useGeneratedEntityName-CxA6RL77.js";const K={class:"pages-component"},W={class:"container"},X={class:"content-block"},Y={key:1,class:"card-container"},Z=["onClick"],ee={key:0},me=N({__name:"requestsPage",setup(se){const p=H(),f=u(null),l=u({...D}),{requests:I}=$(p),_=u(!0),{isModalOpen:V,isEditMode:b,openModal:v,openEditModal:w,closeModal:E}=A(),{sortOption:d,sortOptions:F,searchQuery:i,sortedItems:x,addRecentItem:L}=G(()=>I.value,void 0,"request"),O=n=>{w();const{id:t,created_at:k,updated_at:M,...e}=n;Object.assign(l.value,e),f.value=n.id,L(n.id,n.name)},Q=()=>{E(),q()},q=()=>{l.value={...D}};return j(async()=>{await p.readRequests(),_.value=!1}),(n,t)=>{const k=B("BaseSortButtons"),M=B("BaseLoader");return a(),r(g,null,[o("div",K,[o("div",W,[c(P),o("div",X,[o("div",{class:"card create-card",onClick:t[0]||(t[0]=(...e)=>s(v)&&s(v)(...e))},[c(s(T),{class:"icon"}),t[3]||(t[3]=o("div",{class:"text"},[o("span",null,"Новый реквест"),o("span",{class:"subtitle"},"Прототипирование")],-1))]),c(k,{modelValue:s(d),"onUpdate:modelValue":t[1]||(t[1]=e=>R(d)?d.value=e:null),searchQuery:s(i),"onUpdate:searchQuery":t[2]||(t[2]=e=>R(i)?i.value=e:null),isSearch:!0,options:s(F)},null,8,["modelValue","searchQuery","options"]),_.value?(a(),C(M,{key:0})):(a(),r("div",Y,[(a(!0),r(g,null,U(s(x),e=>{var y;return a(),r("div",{class:"card",key:e.id,onClick:z(te=>O(e),["stop"])},[o("h3",null,m(e.name),1),e.owner?(a(),r("span",ee,"Владелец: "+m((y=e.owner)==null?void 0:y.username),1)):h("",!0),o("span",null,m(s(d)==="newest"?`Создан ${s(S)(e.created_at)}`:`Изменен ${s(S)(e.updated_at)}`),1)],8,Z)}),128))]))])])]),s(V)?(a(),C(J,{key:0,isEditMode:s(b),formData:l.value,currentRequestId:f.value,onClose:Q},null,8,["isEditMode","formData","currentRequestId"])):h("",!0)],64)}}});export{me as default};
