import{i as R,r as c,x as $,j,k as y,o as a,a as r,b as o,f as u,u as s,z as g,m as B,F as C,e as U,d as h,l as z,t as p}from"./index-SnOBJRe6.js";import{s as P,F as T}from"./pages.css_vue_type_style_index_0_src_true_lang-OrqQe0zQ.js";import"./useUsersStore-DeqpMyJa.js";import{u as q,a as w,f as S}from"./useSorting-Bi68fFlD.js";import{u as A,w as G}from"./widgetModal-DCZbw6La.js";import{b as W}from"./useKeyboardShortcuts-DkxLRe_B.js";import"./useFullScreen-BNunA2HP.js";import"./useGeneratedEntityName-CxA6RL77.js";import"./vuelidate-BXQAJ37Y.js";const H={class:"pages-component"},J={class:"container"},K={class:"content-block"},X={key:1,class:"card-container"},Y=["onClick"],Z={key:0},ue=R({__name:"widgetsPage",setup(ee){const m=A(),f=c(null),i=c({...W}),{widgets:b}=$(m),_=c(!0),{isModalOpen:D,isEditMode:I,openModal:v,openEditModal:V,closeModal:E}=q(),{sortOption:d,sortOptions:F,searchQuery:l,sortedItems:x,addRecentItem:L}=w(()=>b.value,void 0,"widget"),O=n=>{V();const{id:t,created_at:k,updated_at:M,...e}=n;Object.assign(i.value,e),f.value=n.id,L(n.id,n.name)},Q=()=>{E(),N()},N=()=>{i.value={...W}};return j(async()=>{await m.readWidgets(),_.value=!1}),(n,t)=>{const k=y("BaseSortButtons"),M=y("BaseLoader");return a(),r(C,null,[o("div",H,[o("div",J,[u(P),o("div",K,[o("div",{class:"card create-card",onClick:t[0]||(t[0]=(...e)=>s(v)&&s(v)(...e))},[u(s(T),{class:"icon"}),t[3]||(t[3]=o("div",{class:"text"},[o("span",null,"Новый виджет"),o("span",{class:"subtitle"},"Прототипирование")],-1))]),u(k,{modelValue:s(d),"onUpdate:modelValue":t[1]||(t[1]=e=>g(d)?d.value=e:null),searchQuery:s(l),"onUpdate:searchQuery":t[2]||(t[2]=e=>g(l)?l.value=e:null),isSearch:!0,options:s(F)},null,8,["modelValue","searchQuery","options"]),_.value?(a(),B(M,{key:0})):(a(),r("div",X,[(a(!0),r(C,null,U(s(x),e=>(a(),r("div",{class:"card",key:e.id,onClick:z(se=>O(e),["stop"])},[o("h3",null,p(e.name),1),e.description?(a(),r("span",Z,"Описание: "+p(e.description),1)):h("",!0),o("span",null,p(s(d)==="newest"?`Создан ${s(S)(e.created_at)}`:`Изменен ${s(S)(e.updated_at)}`),1)],8,Y))),128))]))])])]),s(D)?(a(),B(G,{key:0,isEditMode:s(I),formData:i.value,currentWidgetId:f.value,onClose:Q},null,8,["isEditMode","formData","currentWidgetId"])):h("",!0)],64)}}});export{ue as default};
