import{i as B,A as $,B as y,r as p,k as m,o as c,a as f,b as n,l as C,f as i,u as o,w as k,p as x,t as v,d as S,_ as h}from"./index-SnOBJRe6.js";import{u as N,a as U}from"./useUsersStore-DeqpMyJa.js";import{u as I,l as q}from"./vuelidate-BXQAJ37Y.js";const A={class:"login-page"},L={class:"login-block"},P={key:0,class:"error"},R=B({__name:"loginPage",setup(T){const s=$({username:"",password:""}),g=N(),_=U(),w=y(),r=p(null),t=p(!1),a=I(q,s),b=async()=>{var e;if(r.value=null,await a.value.$validate(),a.value.$invalid)return;t.value=!0;const l=await g.login(s.username,s.password);l&&((e=l.data)!=null&&e.access_token)?(await _.readCurrentUser(),w.push("/channels")):(r.value="Неверный логин или пароль",t.value=!1)};return(l,e)=>{const d=m("BaseInput"),V=m("BaseButton");return c(),f("div",A,[n("div",L,[e[2]||(e[2]=n("h2",null,"Авторизация",-1)),n("form",{onSubmit:C(b,["prevent"])},[i(d,{type:"text",required:"",modelValue:s.username,"onUpdate:modelValue":e[0]||(e[0]=u=>s.username=u),label:"Логин",class:"section-input",labelColor:"rgb(44, 44, 44)",error:o(a).username.$error?o(a).username.$errors[0].$message:void 0},null,8,["modelValue","error"]),i(d,{type:"password",required:"",modelValue:s.password,"onUpdate:modelValue":e[1]||(e[1]=u=>s.password=u),label:"Пароль",class:"section-input",labelColor:"rgb(44, 44, 44)",error:o(a).password.$error?o(a).password.$errors[0].$message:void 0},null,8,["modelValue","error"]),i(V,{styleType:"primary",size:"medium",type:"submit",disabled:t.value||o(a).$invalid},{default:k(()=>[x(v(t.value?"Вход...":"Войти"),1)]),_:1},8,["disabled"]),r.value?(c(),f("p",P,v(r.value),1)):S("",!0)],32),e[3]||(e[3]=n("a",{class:"forgot-password"},"Забыли пароль?",-1))])])}}}),M=h(R,[["__scopeId","data-v-870206fb"]]);export{M as default};
